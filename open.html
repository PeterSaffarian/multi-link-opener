<!doctype html><meta charset="utf-8"><title>Open Links</title>
<p id="s">Processingâ€¦</p><div id="log"></div>
<script>
const MAX=50, STEP=40;
const q=new URLSearchParams(location.search);
const raw = [
  ...(q.get("all") ? q.get("all").split("|") : []),
  ...Array.from(q).filter(([k])=>k==="u").map(([,v])=>v)
];
function norm(u){
  u=(u||"").trim(); if(!u) return null;
  try{
    if(!/^[a-z][a-z0-9+.-]*:\/\//i.test(u)) u="https://"+u;
    const url=new URL(u);
    const p=url.protocol.toLowerCase();
    if(p!=="http:" && p!=="https:") return null;
    return url.toString();
  }catch{ return null; }
}
const seen=new Set();
const links=raw.map(norm).filter(u=>u && !seen.has(u) && (seen.add(u),true)).slice(0,MAX);
const s=document.getElementById("s"), log=document.getElementById("log");
if(!links.length){ s.textContent="No valid links."; throw 0; }
let ok=0, blocked=0;
links.forEach((link,i)=>setTimeout(()=>{
  const w=window.open(link,"_blank","noopener,noreferrer");
  (w&& !w.closed) ? ok++ : blocked++;
  if(i===links.length-1){
    s.textContent = blocked? `${ok} opened, ${blocked} blocked (allow pop-ups).` : `Opened ${ok} link(s).`;
  }
}, STEP*i));
</script>
